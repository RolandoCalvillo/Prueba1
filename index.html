<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluaci√≥n Modular CNCI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }
        .bg-cnci-blue {
            background-color: #2a6aff;
        }
        .text-cnci-orange {
            color: #ff8500;
        }
        .bg-cnci-orange {
            background-color: #ff8500;
        }
        .card-container {
            perspective: 1000px;
        }
        .card {
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
        }
        .card.is-flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 1rem;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            background-color: white;
        }
        .card-face-back {
            transform: rotateY(180deg);
        }
        .progress-bar {
            background-color: #e2e8f0;
            border-radius: 9999px;
            overflow: hidden;
            height: 1.5rem;
        }
        .progress-fill {
            height: 100%;
            border-radius: 9999px;
            transition: width 0.5s ease;
        }
        /* Custom scrollbar for improved aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e2e8f0;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #2a6aff;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #1a4ccc;
        }
        .tab-button.active {
            border-bottom: 2px solid #ff8500;
            color: #2a6aff;
            font-weight: 600;
        }

        /* Flexbox for main layout */
        .flex-center-col {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .flex-col-start {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .flex-between-center {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Responsive Grid for Cards */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 20px;
        }
        @media (min-width: 768px) {
            .card-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        .btn-return {
            background-color: transparent;
            border: 2px solid #2a6aff;
            color: #2a6aff;
            padding: 10px 20px;
            border-radius: 9999px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-return:hover {
            background-color: #2a6aff;
            color: white;
        }
        
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <!-- Pantalla de Login -->
    <div id="login-screen" class="w-full max-w-xl mx-auto p-8 bg-white rounded-xl shadow-2xl flex-center-col transition-opacity duration-500 ease-in-out opacity-100">
        <img src="https://i.ibb.co/m5QcyKW/Logo-CNCI.png" alt="Logo de la Universidad CNCI" class="h-16 w-auto mb-6">
        <div class="text-center w-full">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-cnci-blue mb-2">Evaluaci√≥n Modular ‚Äì Departamento de Servicios Estudiantiles</h1>
            <h2 class="text-xl sm:text-2xl font-bold text-gray-700 mb-2">M√≥dulo M8, Agosto 2025 üóìÔ∏è</h2>
            <p class="text-gray-600 mb-6">Consulta tu desempe√±o del m√≥dulo de manera detallada ingresando tu usuario Vici. ‚ú®</p>
        </div>
        <div class="w-full">
            <input type="text" id="userInput" placeholder="Escribe tu usuario aqu√≠, ej. Asesor01" class="w-full p-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-cnci-blue focus:border-transparent transition duration-300 mb-4 text-center text-lg">
            <div id="loginError" class="text-red-500 text-sm mb-4 hidden text-center">Usuario no encontrado. Por favor, intenta de nuevo. üò•</div>
            <button id="consultarBtn" class="w-full py-4 bg-cnci-blue text-white font-bold rounded-xl shadow-lg hover:bg-cnci-orange transition duration-300">Consultar mi Evaluaci√≥n üîé</button>
        </div>
    </div>

    <!-- Pantalla de Evaluaci√≥n (oculta inicialmente) -->
    <div id="evaluation-screen" class="w-full max-w-5xl mx-auto p-6 md:p-10 bg-white rounded-xl shadow-2xl transition-opacity duration-500 ease-in-out opacity-0 hidden">
        <div class="flex flex-col md:flex-row items-center justify-between mb-6">
            <div class="text-left w-full">
                <h1 class="text-3xl md:text-4xl font-extrabold text-cnci-blue mb-1">Resultados de Evaluaci√≥n üìä</h1>
                <p class="text-xl md:text-2xl font-bold text-gray-700"><span id="asesorName"></span></p>
            </div>
            <button id="returnBtn" class="btn-return mt-4 md:mt-0">Volver ‚Ü©Ô∏è</button>
        </div>

        <!-- Pesta√±as -->
        <div class="flex space-x-2 md:space-x-4 border-b border-gray-200 mb-6">
            <button class="tab-button active pb-2 px-2" data-tab="resumen">Resumen General üåü</button>
            <button class="tab-button pb-2 px-2" data-tab="tendencias">Tendencias üìà</button>
            <button class="tab-button pb-2 px-2" data-tab="insignias">Insignias üèÜ</button>
            <button class="tab-button pb-2 px-2" data-tab="plan">Plan de Mejora üìù</button>
        </div>

        <!-- Contenido de las Pesta√±as -->
        <div id="tab-content">
            <!-- Pesta√±a 1: Resumen General -->
            <div id="resumen" class="tab-pane">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-gray-50 p-6 rounded-xl shadow-md">
                        <h3 class="text-xl font-bold text-cnci-blue mb-2">Calificaci√≥n General ‚≠ê</h3>
                        <div class="progress-bar">
                            <div id="generalScore" class="progress-fill bg-green-500"></div>
                        </div>
                        <p class="mt-2 text-right text-gray-600"><span id="generalScoreValue"></span>%</p>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-xl shadow-md">
                        <h3 class="text-xl font-bold text-cnci-blue mb-2">Meta de Llamadas üìû</h3>
                        <div class="progress-bar">
                            <div id="callsGoal" class="progress-fill bg-cnci-orange"></div>
                        </div>
                        <p class="mt-2 text-right text-gray-600"><span id="callsGoalValue"></span>%</p>
                    </div>
                </div>
                
                <h3 class="text-xl font-bold text-gray-700 mb-4">Criterios de Evaluaci√≥n üìù</h3>
                <div id="assessment-cards" class="card-grid">
                    <!-- Las tarjetas de criterios se generar√°n con JS aqu√≠ -->
                </div>

                <div class="mt-8 p-6 bg-gray-50 rounded-xl shadow-md">
                    <h3 class="text-xl font-bold text-cnci-blue mb-2">Comentarios Generales del Supervisor üí¨</h3>
                    <textarea id="supervisorComments" class="w-full h-32 p-4 rounded-lg border border-gray-300 focus:ring-2 focus:ring-cnci-blue focus:border-transparent transition duration-300" readonly></textarea>
                    <a href="https://example.com/detalles-evaluacion" target="_blank" class="w-full py-3 px-6 mt-4 inline-block text-center bg-cnci-blue text-white font-bold rounded-xl shadow-lg hover:bg-cnci-orange transition duration-300">Detalles de Evaluaci√≥n üîó</a>
                </div>
            </div>

            <!-- Pesta√±a 2: Tendencias -->
            <div id="tendencias" class="tab-pane hidden">
                <h3 class="text-xl font-bold text-gray-700 mb-4">Evoluci√≥n del Desempe√±o üìà</h3>
                <div class="bg-gray-50 p-6 rounded-xl shadow-md mb-8">
                    <canvas id="performanceChart" class="w-full h-auto max-h-96"></canvas>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-gray-50 p-6 rounded-xl shadow-md text-center">
                        <h4 class="text-lg font-bold text-cnci-blue mb-2">Mes Anterior (-2)</h4>
                        <p class="text-2xl font-bold text-gray-800"><span id="month2Score"></span></p>
                        <p class="text-sm text-gray-600"><span id="month2Trend"></span></p>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-xl shadow-md text-center">
                        <h4 class="text-lg font-bold text-cnci-blue mb-2">Mes Pasado (-1)</h4>
                        <p class="text-2xl font-bold text-gray-800"><span id="month1Score"></span></p>
                        <p class="text-sm text-gray-600"><span id="month1Trend"></span></p>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-xl shadow-md text-center">
                        <h4 class="text-lg font-bold text-cnci-blue mb-2">Mes Actual</h4>
                        <p class="text-2xl font-bold text-gray-800"><span id="currentMonthScore"></span></p>
                        <p class="text-sm text-gray-600">--</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-gray-50 p-6 rounded-xl shadow-md">
                        <h4 class="text-lg font-bold text-cnci-blue mb-2">Mayor Mejora üöÄ</h4>
                        <p id="mayorMejora" class="text-gray-600"></p>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-xl shadow-md">
                        <h4 class="text-lg font-bold text-cnci-blue mb-2">√Årea Cr√≠tica ‚ö†Ô∏è</h4>
                        <p id="areaCritica" class="text-gray-600"></p>
                    </div>
                </div>
            </div>

            <!-- Pesta√±a 3: Insignias -->
            <div id="insignias" class="tab-pane hidden">
                <h3 class="text-xl font-bold text-cnci-blue mb-4">Tus Insignias üèÜ</h3>
                <ul id="badges-list" class="space-y-4 mb-8">
                    <!-- Las insignias se generar√°n con JS aqu√≠ -->
                </ul>

                <h3 class="text-xl font-bold text-cnci-blue mb-4">Pr√≥ximas Insignias ‚ú®</h3>
                <ul id="upcoming-badges" class="space-y-4">
                    <!-- Las pr√≥ximas insignias se generar√°n con JS aqu√≠ -->
                </ul>
            </div>

            <!-- Pesta√±a 4: Plan de Mejora -->
            <div id="plan" class="tab-pane hidden">
                <div class="bg-gray-50 p-6 rounded-xl shadow-md">
                    <h3 class="text-xl font-bold text-cnci-blue mb-2">Instrucciones para el Plan de Mejora üìù</h3>
                    <p class="text-gray-600 mb-4">A partir de los resultados de tu evaluaci√≥n, identifica de 3 a 4 √°reas de oportunidad y describe acciones concretas que puedas implementar para mejorarlas. Indica el plazo estimado y c√≥mo dar√°s seguimiento a cada acci√≥n. S√© espec√≠fico y realista para facilitar el cumplimiento y la evaluaci√≥n de avances. Ingresa al siguiente enlace, redacta y establece tu plan de mejora antes del 11 de septiembre de 2025.</p>
                    <a href="https://ejemplo.com/plan-de-mejora" target="_blank" class="w-full py-3 px-6 mt-4 inline-block text-center bg-cnci-blue text-white font-bold rounded-xl shadow-lg hover:bg-cnci-orange transition duration-300">Acceder a mi Plan de Mejora üìÑ</a>
                </div>
            </div>

        </div>
    </div>
    
    <!-- Librer√≠as JS para gr√°ficos (Chart.js) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // Datos de ejemplo para cada asesor
            const asesores = {
                "asesor01": {
                    name: "Asesor 01",
                    generalScore: 88,
                    callsGoal: 95,
                    comments: "Excelente desempe√±o en general. El asesor muestra un gran compromiso con la calidad y la satisfacci√≥n del estudiante. El manejo de los procesos es impecable.",
                    criteria: {
                        "Retenci√≥n": { supervision: { score: 90, comment: "Muy proactivo en la retenci√≥n." }, quality: { score: 85, comment: "Excelente seguimiento de los casos." } },
                        "Reincorporaci√≥n": { supervision: { score: 85, comment: "Necesita mejorar el seguimiento." }, quality: { score: 90, comment: "Buen manejo de las objeciones." } },
                        "Procesos": { supervision: { score: 95, comment: "Impecable. Sin errores." }, quality: { score: 98, comment: "Todos los procesos seguidos al pie de la letra." } },
                        "Llamada": { supervision: { score: 90, comment: "Tono profesional y emp√°tico." }, quality: { score: 88, comment: "Buena escucha activa." } },
                        "WhatsApp": { supervision: { score: 85, comment: "Respuestas oportunas." }, quality: { score: 92, comment: "Claro y conciso." } },
                        "Correo electr√≥nico": { supervision: { score: 92, comment: "Excelente redacci√≥n." }, quality: { score: 95, comment: "Respuestas completas." } },
                        "Viva Engage": { supervision: { score: 80, comment: "Participaci√≥n moderada." }, quality: { score: 85, comment: "Aporta valor." } },
                        "Actividades administrativas": { supervision: { score: 95, comment: "Tareas completadas a tiempo." }, quality: { score: 98, comment: "Datos correctos y precisos." } }
                    },
                    trends: {
                        months: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago'],
                        scores: [78, 80, 82, 85, 87, 88, 90, 88],
                        currentMonthScore: 88,
                        month1Score: 90,
                        month2Score: 88,
                        mayorMejora: "Llamada: Incremento del 5% en la calidad de las llamadas.",
                        areaCritica: "Viva Engage: Necesita mayor interacci√≥n."
                    },
                    badges: [
                        { emoji: 'üèÜ', title: 'Maestro de Procesos' },
                        { emoji: 'üèÖ', title: 'Especialista en Retenci√≥n' },
                        { emoji: 'üåü', title: 'Campe√≥n de Comunicaci√≥n' }
                    ],
                    upcomingBadges: [
                        { emoji: 'üí™', title: 'Ninja de Reincorporaci√≥n', description: 'Lograr 95% en reincorporaci√≥n por 3 meses.' },
                        { emoji: 'üöÄ', title: 'L√≠der en Llamadas', description: 'Mantener un puntaje superior a 90% por 2 meses.' }
                    ]
                },
                "asesor02": {
                    name: "Asesor 02",
                    generalScore: 75,
                    callsGoal: 80,
                    comments: "Se observa un esfuerzo constante, pero hay √°reas de oportunidad en los procesos y la comunicaci√≥n escrita. Se sugiere revisar los manuales de procedimientos.",
                    criteria: {
                        "Retenci√≥n": { supervision: { score: 70, comment: "Necesita seguimiento." }, quality: { score: 75, comment: "Oportunidad en la persuasi√≥n." } },
                        "Reincorporaci√≥n": { supervision: { score: 75, comment: "Sigue los pasos, pero puede mejorar." }, quality: { score: 80, comment: "Interes en mejorar." } },
                        "Procesos": { supervision: { score: 65, comment: "Oportunidad en el seguimiento." }, quality: { score: 70, comment: "Falta apego a los manuales." } },
                        "Llamada": { supervision: { score: 80, comment: "Buena actitud, pero debe ser mas breve." }, quality: { score: 85, comment: "Llamadas largas." } },
                        "WhatsApp": { supervision: { score: 75, comment: "Mensajes cortos." }, quality: { score: 78, comment: "Aportar mas informacion." } },
                        "Correo electr√≥nico": { supervision: { score: 60, comment: "Oportunidad en la redaccion." }, quality: { score: 65, comment: "Aun falta mucho por aprender." } },
                        "Viva Engage": { supervision: { score: 70, comment: "Aun sin aportar valor." }, quality: { score: 75, comment: "Necesita mas interaccion." } },
                        "Actividades administrativas": { supervision: { score: 80, comment: "Aun le falta." }, quality: { score: 85, comment: "Oportunidad de mejora." } }
                    },
                    trends: {
                        months: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago'],
                        scores: [65, 68, 70, 72, 75, 73, 76, 75],
                        currentMonthScore: 75,
                        month1Score: 76,
                        month2Score: 73,
                        mayorMejora: "Reincorporaci√≥n: Aumento del 3% en reincorporaci√≥n del mes anterior.",
                        areaCritica: "Procesos: A√∫n hay errores, se necesita reforzar la capacitaci√≥n."
                    },
                    badges: [
                        { emoji: 'üìù', title: 'Aprendiz Destacado' },
                        { emoji: 'üëç', title: 'Comunicaci√≥n Clara' }
                    ],
                    upcomingBadges: [
                        { emoji: 'üí°', title: 'Experto en Procesos', description: 'Lograr 90% en Procesos por 3 meses.' },
                        { emoji: 'üó£Ô∏è', title: 'Maestro de la Palabra', description: 'Mejorar el tono de voz y la fluidez en llamadas.' }
                    ]
                },
                "asesor03": {
                    name: "Asesor 03",
                    generalScore: 95,
                    callsGoal: 98,
                    comments: "El mejor desempe√±o del m√≥dulo. Un verdadero ejemplo a seguir. Mantiene un est√°ndar de calidad y eficiencia extraordinario en todas las √°reas. ¬°Felicidades!.",
                    criteria: {
                        "Retenci√≥n": { supervision: { score: 98, comment: "Incre√≠blemente efectivo." }, quality: { score: 99, comment: "Excede las expectativas." } },
                        "Reincorporaci√≥n": { supervision: { score: 97, comment: "Supera la meta mensual." }, quality: { score: 98, comment: "Excelente trabajo de seguimiento." } },
                        "Procesos": { supervision: { score: 99, comment: "Maestro en procesos. Sin palabras." }, quality: { score: 100, comment: "Absolutamente perfecto." } },
                        "Llamada": { supervision: { score: 98, comment: "Tono de voz perfecto. Breve y conciso." }, quality: { score: 97, comment: "Llamada perfecta. Sin errores." } },
                        "WhatsApp": { supervision: { score: 99, comment: "Excelente respuesta en tiempo y forma." }, quality: { score: 98, comment: "Excelente redaccion y comunicacion." } },
                        "Correo electr√≥nico": { supervision: { score: 98, comment: "Respuestas impecables. Sin errores." }, quality: { score: 99, comment: "Mejor redaccion." } },
                        "Viva Engage": { supervision: { score: 90, comment: "Aporta valor." }, quality: { score: 95, comment: "Muy proactivo." } },
                        "Actividades administrativas": { supervision: { score: 99, comment: "Cumple las tareas en tiempo y forma." }, quality: { score: 98, comment: "Trabajo impecable." } }
                    },
                    trends: {
                        months: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago'],
                        scores: [90, 91, 93, 94, 95, 96, 95, 95],
                        currentMonthScore: 95,
                        month1Score: 95,
                        month2Score: 96,
                        mayorMejora: "Viva Engage: Aumento del 5% en su participaci√≥n.",
                        areaCritica: "Ninguna. Todo excelente. ¬°Felicidades!"
                    },
                    badges: [
                        { emoji: 'ü•á', title: 'Asesor del Mes' },
                        { emoji: 'üëë', title: 'Rey de la Reincorporaci√≥n' },
                        { emoji: 'üíé', title: 'Comunicador Diamante' }
                    ],
                    upcomingBadges: [
                        { emoji: 'üå†', title: 'Leyenda CNCI', description: 'Mantener este nivel de excelencia por 3 m√≥dulos consecutivos.' },
                        { emoji: 'üó∫Ô∏è', title: 'Gu√≠a de √âxito', description: 'Servir como mentor para nuevos asesores.' }
                    ]
                }
                // A√±ade el resto de los asesores aqu√≠ (del 04 al 18) con datos ficticios
            };

            const users = ["asesor01", "asesor02", "asesor03", "asesor04", "asesor05", "asesor06", "asesor07", "asesor08", "asesor09", "asesor10", "asesor11", "asesor12", "asesor13", "asesor14", "asesor15", "asesor16", "asesor17", "asesor18"];

            const loginScreen = document.getElementById('login-screen');
            const evaluationScreen = document.getElementById('evaluation-screen');
            const userInput = document.getElementById('userInput');
            const consultarBtn = document.getElementById('consultarBtn');
            const returnBtn = document.getElementById('returnBtn');
            const loginError = document.getElementById('loginError');

            let myChart = null;

            function showScreen(screenId) {
                if (screenId === 'evaluation') {
                    loginScreen.classList.add('opacity-0');
                    loginScreen.classList.add('hidden');
                    evaluationScreen.classList.remove('hidden');
                    setTimeout(() => evaluationScreen.classList.remove('opacity-0'), 10);
                } else {
                    evaluationScreen.classList.add('opacity-0');
                    setTimeout(() => {
                        evaluationScreen.classList.add('hidden');
                        loginScreen.classList.remove('hidden');
                        loginScreen.classList.remove('opacity-0');
                        userInput.value = '';
                    }, 500);
                }
            }

            function loadEvaluationData(user) {
                const data = asesores[user.toLowerCase()];
                if (!data) {
                    loginError.classList.remove('hidden');
                    return;
                }
                loginError.classList.add('hidden');

                // Cargar datos en la pantalla de evaluaci√≥n
                document.getElementById('asesorName').textContent = data.name;

                // Pesta√±a Resumen General
                document.getElementById('generalScore').style.width = `${data.generalScore}%`;
                document.getElementById('generalScoreValue').textContent = data.generalScore;
                document.getElementById('callsGoal').style.width = `${data.callsGoal}%`;
                document.getElementById('callsGoalValue').textContent = data.callsGoal;
                document.getElementById('supervisorComments').value = data.comments;

                // Criterios de Evaluaci√≥n
                const cardsContainer = document.getElementById('assessment-cards');
                cardsContainer.innerHTML = '';
                for (const criterion in data.criteria) {
                    const cardData = data.criteria[criterion];
                    const card = document.createElement('div');
                    card.className = 'card-container';
                    card.innerHTML = `
                        <div class="card cursor-pointer" onclick="this.classList.toggle('is-flipped')">
                            <!-- Frente de la tarjeta -->
                            <div class="card-face p-4 space-y-2">
                                <h4 class="text-xl font-bold text-cnci-blue">${criterion} üìù</h4>
                                <div class="flex-grow">
                                    <h5 class="font-bold">Supervisi√≥n: <span class="text-cnci-orange text-lg">${cardData.supervision.score}%</span></h5>
                                    <p class="text-gray-600 text-sm italic">${cardData.supervision.comment}</p>
                                </div>
                            </div>
                            <!-- Reverso de la tarjeta -->
                            <div class="card-face card-face-back p-4 space-y-2">
                                <h4 class="text-xl font-bold text-cnci-blue">${criterion} üìù</h4>
                                <div class="flex-grow">
                                    <h5 class="font-bold">Calidad: <span class="text-cnci-orange text-lg">${cardData.quality.score}%</span></h5>
                                    <p class="text-gray-600 text-sm italic">${cardData.quality.comment}</p>
                                </div>
                            </div>
                        </div>
                    `;
                    cardsContainer.appendChild(card);
                }
                
                // Pesta√±a Tendencias
                const ctx = document.getElementById('performanceChart').getContext('2d');
                if (myChart) {
                    myChart.destroy();
                }
                myChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: data.trends.months,
                        datasets: [{
                            label: 'Puntaje de Evaluaci√≥n',
                            data: data.trends.scores,
                            borderColor: '#2a6aff',
                            backgroundColor: 'rgba(42, 106, 255, 0.2)',
                            tension: 0.4,
                            pointRadius: 5,
                            pointBackgroundColor: '#2a6aff',
                            pointBorderColor: '#fff',
                            pointHoverRadius: 7
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                            }
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Meses',
                                    color: '#333'
                                },
                                grid: {
                                    display: false
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Puntaje',
                                    color: '#333'
                                },
                                min: 50,
                                max: 100,
                                ticks: {
                                    stepSize: 5
                                }
                            }
                        }
                    }
                });
                
                document.getElementById('month2Score').textContent = data.trends.month2Score;
                document.getElementById('month1Score').textContent = data.trends.month1Score;
                document.getElementById('currentMonthScore').textContent = data.trends.currentMonthScore;
                
                const month2TrendEmoji = data.trends.month2Score < data.trends.month1Score ? 'üìâ' : 'üìà';
                const month1TrendEmoji = data.trends.month1Score < data.trends.currentMonthScore ? 'üìà' : 'üìâ';
                document.getElementById('month2Trend').textContent = `${month2TrendEmoji} ${Math.abs(data.trends.month1Score - data.trends.month2Score)} puntos`;
                document.getElementById('month1Trend').textContent = `${month1TrendEmoji} ${Math.abs(data.trends.currentMonthScore - data.trends.month1Score)} puntos`;
                
                document.getElementById('mayorMejora').textContent = `üöÄ ${data.trends.mayorMejora}`;
                document.getElementById('areaCritica').textContent = `‚ö†Ô∏è ${data.trends.areaCritica}`;

                // Pesta√±a Insignias
                const badgesList = document.getElementById('badges-list');
                badgesList.innerHTML = '';
                data.badges.forEach(badge => {
                    const li = document.createElement('li');
                    li.className = 'flex items-center space-x-2';
                    li.innerHTML = `<span class="text-xl">${badge.emoji}</span><span class="text-lg font-semibold text-gray-700">${badge.title}</span>`;
                    badgesList.appendChild(li);
                });

                const upcomingBadgesList = document.getElementById('upcoming-badges');
                upcomingBadgesList.innerHTML = '';
                data.upcomingBadges.forEach(badge => {
                    const li = document.createElement('li');
                    li.className = 'flex flex-col space-y-1';
                    li.innerHTML = `<span class="flex items-center space-x-2"><span class="text-xl">${badge.emoji}</span><span class="text-lg font-semibold text-gray-700">${badge.title}</span></span><p class="text-gray-600 ml-7">${badge.description}</p>`;
                    upcomingBadgesList.appendChild(li);
                });
                
                showScreen('evaluation');
            }

            consultarBtn.addEventListener('click', () => {
                const user = userInput.value.trim().toLowerCase();
                if (users.includes(user)) {
                    loadEvaluationData(user);
                } else {
                    loginError.classList.remove('hidden');
                }
            });

            userInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    consultarBtn.click();
                }
            });

            returnBtn.addEventListener('click', () => {
                showScreen('login');
                // Restablecer la primera pesta√±a al volver
                document.querySelector('.tab-button.active').classList.remove('active');
                document.querySelector('#resumen').classList.remove('hidden');
                document.querySelector('[data-tab="resumen"]').classList.add('active');
                document.getElementById('tendencias').classList.add('hidden');
                document.getElementById('insignias').classList.add('hidden');
                document.getElementById('plan').classList.add('hidden');
            });
            
            // L√≥gica de pesta√±as
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.add('hidden'));
                    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                    
                    const tabName = button.getAttribute('data-tab');
                    document.getElementById(tabName).classList.remove('hidden');
                    button.classList.add('active');
                });
            });

            // L√≥gica para el flip de las tarjetas (ya est√° integrada en el HTML con el onclick)
        });
    </script>
</body>
</html>
